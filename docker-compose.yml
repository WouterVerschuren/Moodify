services:
  audioservice:
    build: ./Services/AudioService
    container_name: moodify-audioservice
    environment:
      - SUPABASE_URL=${SUPABASE_URL}
      - SUPABASE_SERVICE_ROLE=${SUPABASE_SERVICE_ROLE}
      - SUPABASE_ANON_KEY=${SUPABASE_ANON_KEY}
      - SUPABASE_BUCKET=${SUPABASE_BUCKET}
      - AUDIO_UPLOAD_PATH=${AUDIO_UPLOAD_PATH}
      - MOODIFY_STORAGE_ACCESS_KEY_ID=${MOODIFY_STORAGE_ACCESS_KEY_ID}
      - ASPNETCORE_ENVIRONMENT=Development
    ports:
      - "5000:8080"

  authservice:
    build: ./Services/AuthService
    container_name: moodify-authservice
    environment:
      - SUPABASE_URL=${SUPABASE_URL}
      - SUPABASE_ANON_KEY=${SUPABASE_ANON_KEY}
      - SUPABASE_SERVICE_ROLE=${SUPABASE_SERVICE_ROLE}
      - ASPNETCORE_ENVIRONMENT=Development
    ports:
      - "5001:8080"

  frontend:
    build: ./MoodifyFrontend
    container_name: moodify-frontend
    depends_on:
      - audioservice
    environment:
      - REACT_APP_API_URL=http://audioservice:5000
    ports:
      - "3000:80"
